"use strict";(self.webpackChunkaqua_bounce=self.webpackChunkaqua_bounce||[]).push([[537],{537:(t,e,r)=>{r.d(e,{ec:()=>n,pb:()=>s});var o=r(406);function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;e=Math.max(e,Number.EPSILON);const r={},n=t.getIndex(),s=t.getAttribute("position"),u=n?n.count:s.count;let c=0;const i=Object.keys(t.attributes),f={},l={},b=[],a=["getX","getY","getZ","getW"];for(let o=0,A=i.length;o<A;o++){const e=i[o];f[e]=[];const r=t.morphAttributes[e];r&&(l[e]=new Array(r.length).fill(0).map((()=>[])))}const h=Math.log10(1/e),m=Math.pow(10,h);for(let o=0;o<u;o++){const e=n?n.getX(o):o;let s="";for(let r=0,o=i.length;r<o;r++){const o=i[r],n=t.getAttribute(o),u=n.itemSize;for(let t=0;t<u;t++)s+=~~(n[a[t]](e)*m)+","}if(s in r)b.push(r[s]);else{for(let r=0,o=i.length;r<o;r++){const o=i[r],n=t.getAttribute(o),s=t.morphAttributes[o],u=n.itemSize,c=f[o],b=l[o];for(let t=0;t<u;t++){const r=a[t];if(c.push(n[r](e)),s)for(let t=0,o=s.length;t<o;t++)b[t].push(s[t][r](e))}}r[s]=c,b.push(c),c++}}const g=t.clone();for(let A=0,w=i.length;A<w;A++){const e=i[A],r=t.getAttribute(e),n=new r.array.constructor(f[e]),s=new o.BufferAttribute(n,r.itemSize,r.normalized);if(g.setAttribute(e,s),e in l)for(let u=0;u<l[e].length;u++){const r=t.morphAttributes[e][u],n=new r.array.constructor(l[e][u]),s=new o.BufferAttribute(n,r.itemSize,r.normalized);g.morphAttributes[e][u]=s}}return g.setIndex(b),g}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3;const r=Math.cos(e),n=100*(1+1e-10),s=[new o.Vector3,new o.Vector3,new o.Vector3],u=new o.Vector3,c=new o.Vector3,i=new o.Vector3,f=new o.Vector3;function l(t){return`${~~(t.x*n)},${~~(t.y*n)},${~~(t.z*n)}`}const b=t.index?t.toNonIndexed():t,a=b.attributes.position,h={};for(let A=0,w=a.count/3;A<w;A++){const t=3*A,e=s[0].fromBufferAttribute(a,t+0),r=s[1].fromBufferAttribute(a,t+1),n=s[2].fromBufferAttribute(a,t+2);u.subVectors(n,r),c.subVectors(e,r);const i=(new o.Vector3).crossVectors(u,c).normalize();for(let o=0;o<3;o++){const t=l(s[o]);t in h||(h[t]=[]),h[t].push(i)}}const m=new Float32Array(3*a.count),g=new o.BufferAttribute(m,3,!1);for(let o=0,A=a.count/3;o<A;o++){const t=3*o,e=s[0].fromBufferAttribute(a,t+0),n=s[1].fromBufferAttribute(a,t+1),b=s[2].fromBufferAttribute(a,t+2);u.subVectors(b,n),c.subVectors(e,n),i.crossVectors(u,c).normalize();for(let o=0;o<3;o++){const e=h[l(s[o])];f.set(0,0,0);for(let t=0,o=e.length;t<o;t++){const o=e[t];i.dot(o)>r&&f.add(o)}f.normalize(),g.setXYZ(t+o,f.x,f.y,f.z)}}return b.setAttribute("normal",g),b}}}]);
//# sourceMappingURL=537.75a35c09.chunk.js.map